"use strict";(self.webpackChunktechnical_notes_for_microsoft_workloads_on_aws=self.webpackChunktechnical_notes_for_microsoft_workloads_on_aws||[]).push([[9556],{1091:(e,l,o)=>{o.d(l,{A:()=>s});const s=o.p+"assets/images/IMwhfypuGcRjaxpGXhbVM0kA-3ed43443b128acec6023a73bfda67c8a.jpg"},5496:(e,l,o)=>{o.r(l),o.d(l,{assets:()=>a,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/index","title":"CloudShell - Install the latest AWS.Tools for PowerShell","description":"by Craig Cooley","source":"@site/docs/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/index.md","sourceDirName":"Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell","slug":"/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/","permalink":"/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/","draft":false,"unlisted":false,"editUrl":"https://github.com/aws-samples/technical-notes-for-microsoft-workloads-on-aws/blob/main/docusaurus/docs/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/index.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"sidebar_label":"CloudShell - Install the latest AWS.Tools for PowerShell"},"sidebar":"tutorialSidebar","previous":{"title":"Install Q CLI on Windows Subsystem for Linux","permalink":"/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Install_Q_CLI_for_Windows/"},"next":{"title":"Windows LAPS & AWS Microsoft Managed Active Directory","permalink":"/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&_AWS_Microsoft_Managed_Active_Directory/"}}');var t=o(4848),n=o(8453);const r={sidebar_position:10,sidebar_label:"CloudShell - Install the latest AWS.Tools for PowerShell"},i="CloudShell - Install the latest AWS.Tools for PowerShell",a={},d=[{value:"tools.sh",id:"toolssh",level:3}];function h(e){const l={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.header,{children:(0,t.jsx)(l.h1,{id:"cloudshell---install-the-latest-awstools-for-powershell",children:"CloudShell - Install the latest AWS.Tools for PowerShell"})}),"\n",(0,t.jsx)(l.p,{children:"by Craig Cooley"}),"\n",(0,t.jsx)(l.p,{children:"Since the CloudShell environment is prebuilt, you can't update the pre-installed modules, but you can download the latest AWS.Tools modules into the CloudShell User directory:"}),"\n",(0,t.jsxs)(l.ul,{children:["\n",(0,t.jsxs)(l.li,{children:[(0,t.jsx)(l.strong,{children:"Home / User"})," Directory:  ",(0,t.jsx)(l.code,{children:"/home/cloudshell-user/.local/share/powershell/Modules"})]}),"\n",(0,t.jsxs)(l.li,{children:["Read-Only ",(0,t.jsx)(l.strong,{children:"system"})," Directory: ",(0,t.jsx)(l.code,{children:"/opt/microsoft/powershell/7/Modules/"})]}),"\n"]}),"\n",(0,t.jsxs)(l.p,{children:["When the same PowerShell Module (eg ",(0,t.jsx)(l.code,{children:"AWS.Tools.EC2"}),") is found in both locations, PowerShell defaults to modules in the ",(0,t.jsx)(l.strong,{children:"user"})," directory before the modules included with CloudShell system directory."]}),"\n",(0,t.jsxs)(l.p,{children:["To install the latest AWS.Tools modules, you can upload the ",(0,t.jsx)(l.code,{children:"tools.sh"})," script to CloudShell (see below)"]}),"\n",(0,t.jsx)(l.p,{children:(0,t.jsx)(l.img,{alt:"Update_PS_-_CloudShell.jpg",src:o(1091).A+"",width:"320",height:"273"})}),"\n",(0,t.jsxs)(l.p,{children:["Mark the script as executable and run ",(0,t.jsx)(l.code,{children:"tools.sh"})]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-shell",children:"chmod +x tools.sh\n./tools.sh \n"})}),"\n",(0,t.jsx)(l.p,{children:"Alternatively, you can simply paste the script into the CloudShell console."}),"\n",(0,t.jsxs)(l.p,{children:["Either method will install the latest version of all AWS.Tools modules and launch ",(0,t.jsx)(l.code,{children:"pwsh"})," in less than 5 seconds.\nYou can check the module version by running ",(0,t.jsx)(l.code,{children:"Get-AWSPowerShellVersion"})]}),"\n",(0,t.jsx)(l.p,{children:(0,t.jsx)(l.img,{alt:"Update_PS_-_CloudShell2.jpg",src:o(9719).A+"",width:"1118",height:"331"})}),"\n",(0,t.jsxs)(l.ul,{children:["\n",(0,t.jsxs)(l.li,{children:["You can ignore the warning message. ",(0,t.jsx)(l.code,{children:"Update-AWSToolsModule"})," will also install moduels to the user folder, however it takes significantly longer to run."]}),"\n"]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{children:"WARNING: You have mismatched versions of the AWS.Tools modules. You can run 'Install-Module AWS.Tools.Installer ; Update-AWSToolsModule' to synchronize the versions of all installed AWS.Tools modules.\n"})}),"\n",(0,t.jsx)(l.p,{children:"Note: CloudShell is limited to 1GB local storage and the latest AWS.Tools consumes about .750 GB."}),"\n",(0,t.jsx)(l.p,{children:"To remove all AWS.Tools modules from the user directory, run this command from a bash prompt (not PowerShell)"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-shell",children:'find "/home/cloudshell-user/.local/share/powershell/Modules" -type d -name "AWS.Tools.*" -exec rm -rf {} \\; 2>/dev/null || true\n'})}),"\n",(0,t.jsx)(l.h3,{id:"toolssh",children:(0,t.jsx)(l.a,{href:"https://gitlab.aws.dev/coolcrai/cloudshell-install-the-latest-aws-tools/-/raw/main/tools.sh?inline=false",children:"tools.sh"})}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-shell",children:'# Upload this file to CloudShell, run \'chmod +x tools.sh\' and execute from a bash prompt\n# Alternate - copy and paste into a CloudShell session\nfind "/home/cloudshell-user/.local/share/powershell/Modules" -type d -name "AWS.Tools.*" -exec rm -rf {} \\; 2>/dev/null || true\ncurl -s -o AWS.Tools.zip "https://sdk-for-net.amazonwebservices.com/ps/v5/latest/AWS.Tools.zip"\nunzip -q -o AWS.Tools.zip -d "/home/cloudshell-user/.local/share/powershell/Modules"\nrm -f AWS.Tools.zip\npwsh\n'})})]})}function c(e={}){const{wrapper:l}={...(0,n.R)(),...e.components};return l?(0,t.jsx)(l,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,l,o)=>{o.d(l,{R:()=>r,x:()=>i});var s=o(6540);const t={},n=s.createContext(t);function r(e){const l=s.useContext(n);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function i(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(n.Provider,{value:l},e.children)}},9719:(e,l,o)=>{o.d(l,{A:()=>s});const s=o.p+"assets/images/IMnqXkytfMTnmqu0a4jSnGOg-434103587f2abff8386a3eb5582181f5.jpg"}}]);