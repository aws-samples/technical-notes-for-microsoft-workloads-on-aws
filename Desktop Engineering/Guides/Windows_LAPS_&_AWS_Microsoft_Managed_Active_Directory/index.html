<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Desktop Engineering/Guides/Windows_LAPS_&_AWS_Microsoft_Managed_Active_Directory/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Windows LAPS &amp; AWS Microsoft Managed Active Directory | Technical Notes for Microsoft Workloads on AWS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Windows LAPS &amp; AWS Microsoft Managed Active Directory | Technical Notes for Microsoft Workloads on AWS"><meta data-rh="true" name="description" content="by Luciano Bernardes and Sassan Hajrasooliha"><meta data-rh="true" property="og:description" content="by Luciano Bernardes and Sassan Hajrasooliha"><link data-rh="true" rel="icon" href="/technical-notes-for-microsoft-workloads-on-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/"><link data-rh="true" rel="alternate" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/" hreflang="en"><link data-rh="true" rel="alternate" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Desktop Engineering","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/"},{"@type":"ListItem","position":2,"name":"Guides","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/"},{"@type":"ListItem","position":3,"name":"Windows LAPS & AWS Microsoft Managed Active Directory","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&_AWS_Microsoft_Managed_Active_Directory/"}]}</script><link rel="alternate" type="application/rss+xml" href="/technical-notes-for-microsoft-workloads-on-aws/blog/rss.xml" title="Technical Notes for Microsoft Workloads on AWS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/technical-notes-for-microsoft-workloads-on-aws/blog/atom.xml" title="Technical Notes for Microsoft Workloads on AWS Atom Feed"><link rel="stylesheet" href="/technical-notes-for-microsoft-workloads-on-aws/assets/css/styles.7bb7c51d.css">
<script src="/technical-notes-for-microsoft-workloads-on-aws/assets/js/runtime~main.508de1d2.js" defer="defer"></script>
<script src="/technical-notes-for-microsoft-workloads-on-aws/assets/js/main.1246c405.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/technical-notes-for-microsoft-workloads-on-aws/"><div class="navbar__logo"><img src="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Technical Notes for Microsoft Workloads on AWS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/home">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/DotNET/Guides/">.NET</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Active Directory/Guides/">Active Directory</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Windows Containers/Guides/">Windows Containers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/SQL Server/Guides/">SQL Server</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/">EC2 Windows</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Licensing/Guides/">Licensing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/">Desktop Engineering</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/aws-samples/technical-notes-for-microsoft-workloads-on-aws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/technical-notes-for-microsoft-workloads-on-aws/home"><span title="About Technical Notes for Microsoft Workloads on AWS" class="linkLabel_WmDU">About Technical Notes for Microsoft Workloads on AWS</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/"><span title="Desktop Engineering" class="categoryLinkLabel_W154">Desktop Engineering</span></a><button aria-label="Collapse sidebar category &#x27;Desktop Engineering&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Install_Q_CLI_for_Windows/"><span title="Install Q CLI on Windows Subsystem for Linux" class="linkLabel_WmDU">Install Q CLI on Windows Subsystem for Linux</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/"><span title="CloudShell - Install the latest AWS.Tools for PowerShell" class="linkLabel_WmDU">CloudShell - Install the latest AWS.Tools for PowerShell</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/"><span title="Windows LAPS &amp; AWS Microsoft Managed Active Directory" class="linkLabel_WmDU">Windows LAPS &amp; AWS Microsoft Managed Active Directory</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/DotNET/"><span title=".NET" class="categoryLinkLabel_W154">.NET</span></a><button aria-label="Expand sidebar category &#x27;.NET&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Active Directory/"><span title="Active Directory" class="categoryLinkLabel_W154">Active Directory</span></a><button aria-label="Expand sidebar category &#x27;Active Directory&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Windows Containers/"><span title="Windows Containers" class="categoryLinkLabel_W154">Windows Containers</span></a><button aria-label="Expand sidebar category &#x27;Windows Containers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/SQL Server/"><span title="SQL Server" class="categoryLinkLabel_W154">SQL Server</span></a><button aria-label="Expand sidebar category &#x27;SQL Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/"><span title="EC2 Windows" class="categoryLinkLabel_W154">EC2 Windows</span></a><button aria-label="Expand sidebar category &#x27;EC2 Windows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Licensing/"><span title="Licensing" class="categoryLinkLabel_W154">Licensing</span></a><button aria-label="Expand sidebar category &#x27;Licensing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/technical-notes-for-microsoft-workloads-on-aws/Workshops"><span title="Workshops" class="linkLabel_WmDU">Workshops</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/"><span>Desktop Engineering</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/"><span>Guides</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Windows LAPS &amp; AWS Microsoft Managed Active Directory</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Windows LAPS &amp; AWS Microsoft Managed Active Directory</h1></header>
<p>by Luciano Bernardes and Sassan Hajrasooliha</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h3>
<p><a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-overview" target="_blank" rel="noopener noreferrer">Windows Local Administrator Password Solution</a> (Windows LAPS) is a Windows feature that automatically manages and backs up the password of a local administrator account on your Microsoft Entra joined or Windows Server Active Directory-joined devices. You can also use Windows LAPS to automatically manage and back up the Directory Services Restore Mode (DSRM) account password on your Windows Server Active Directory domain controllers (DCs). An authorized administrator can retrieve the DSRM password and use it.</p>
<p>If you have self-managed Active directory, meaning you are running your domain controllers as Windows EC2 instances on AWS, the <a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-concepts-overview" target="_blank" rel="noopener noreferrer">considerations and steps</a> to setup LAPS are not different from setting it up on-premises and all features of Windows LAPS are supported provided that your infrastructure meets their minimum requirements. For the remaining of this document we&#x27;re going to assume that your environment runs with <a href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/directory_microsoft_ad.html" target="_blank" rel="noopener noreferrer">AWS Managed Microsoft Active Directory</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-microsoft-laps-background">Legacy Microsoft LAPS background<a href="#legacy-microsoft-laps-background" class="hash-link" aria-label="Direct link to Legacy Microsoft LAPS background" title="Direct link to Legacy Microsoft LAPS background" translate="no">​</a></h3>
<p>Before Windows LAPS, Microsoft had provided a legacy version of the solution, often referred as <em>legacy Microsoft LAPS</em>. It fully works with AWS Managed AD and you can check more details about its implementation following the <a href="https://aws.amazon.com/blogs/security/how-to-deploy-local-administrator-password-solution-with-aws-microsoft-ad/" target="_blank" rel="noopener noreferrer">How to Deploy Local Administrator Password Solution with AWS Microsoft AD</a> blog post.</p>
<p>The legacy solution requires a Microsoft LAPS Client Side Extension (CSE) installed on each server and it stores the local administrator password in clear-text in AD database, secured by Active Directory ACLs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows-laps-requirements-vs-aws-managed-ad-design">Windows LAPS requirements vs AWS Managed AD design<a href="#windows-laps-requirements-vs-aws-managed-ad-design" class="hash-link" aria-label="Direct link to Windows LAPS requirements vs AWS Managed AD design" title="Direct link to Windows LAPS requirements vs AWS Managed AD design" translate="no">​</a></h3>
<p>Aside from the regular clear-text password storage support secured by Active Directory ACLs, Windows LAPS provides enhanced features, such as encrypted password storage support and DSRM password management. It can also leverage either Microsoft Entra ID or Active Directory as the backup directory and integrate with Microsoft Intune.</p>
<p>Regarding OS level support, the solution covers Windows Server 2019, 2022, and 2025. Anything older than Windows Server 2019, should rely on the legacy Microsoft LAPS solution.</p>
<p>Having Active Directory as the LAPS password repository and aiming to enable the enhanced features, Windows LAPS requires Domain Functional Level 2016 and domain controllers running on Windows Server 2019 or newer (Image 1). More information <a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-scenarios-windows-server-active-directory#domain-functional-level-and-domain-controller-os-version-requirements" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p><img decoding="async" loading="lazy" alt="IMAGE1" src="/technical-notes-for-microsoft-workloads-on-aws/assets/images/IMG-1-6a55d205e339e49c357dcba16432c402.png" width="863" height="227" class="img_ev3q"></p>
<p><em>Image 1 - Table summarizing the supported-or-not scenarios (<a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-scenarios-windows-server-active-directory#domain-functional-level-and-domain-controller-os-version-requirements" target="_blank" rel="noopener noreferrer">from Microsoft docs</a>)</em></p>
<p>AWS Managed AD currently runs under the Domain and Forest Functional Level 2012 R2 and the domain controllers run on Windows Server 2019. Consequently, the enhanced features are not supported by AWS Managed AD. Check the <a href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/ms_ad_getting_started.html" target="_blank" rel="noopener noreferrer">Getting started with AWS Managed Microsoft AD</a> documentation to know more.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="windows-laps-in-legacy-microsoft-laps-emulation-mode">Windows LAPS in legacy Microsoft LAPS emulation mode<a href="#windows-laps-in-legacy-microsoft-laps-emulation-mode" class="hash-link" aria-label="Direct link to Windows LAPS in legacy Microsoft LAPS emulation mode" title="Direct link to Windows LAPS in legacy Microsoft LAPS emulation mode" translate="no">​</a></h2>
<p>Windows LAPS has a feature to be backward-compatible with the legacy LAPS to provide the same feature set like regular clear-text password storage support secured by Active Directory ACLs.</p>
<p>As <em>highlighted</em> in <a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-scenarios-legacy" target="_blank" rel="noopener noreferrer">Get started with Windows LAPS in legacy Microsoft LAPS emulation mode</a> documentation:</p>
<p><em>You can set up Windows Local Administrator Password Solution (Windows LAPS) to honor legacy Microsoft LAPS Group Policy settings, but with some restrictions and limitations. The feature is called legacy Microsoft LAPS emulation mode. You might use emulation mode if you migrate an existing deployment of legacy Microsoft LAPS to Windows LAPS.</em></p>
<p>Therefore, considering the current AWS Managed AD underlying architecture, the emulation mode of Windows LAPS is the way to go within AWS Managed AD and it requires the following major steps to have it set up:</p>
<ul>
<li>
<p>Set up the environment initially following steps 2 to 4 from <a href="https://aws.amazon.com/blogs/security/how-to-deploy-local-administrator-password-solution-with-aws-microsoft-ad/" target="_blank" rel="noopener noreferrer">legacy Microsoft LAPS setup instructions blog</a>, which are:</p>
<ul>
<li>
<p>Extending the schema (step 2). you can check your schema extension file with the <a href="https://learn.microsoft.com/en-us/windows-server/identity/laps/laps-technical-reference#windows-laps-schema-vs-legacy-microsoft-laps-schema" target="_blank" rel="noopener noreferrer">Legacy Microsoft LAPS schema element table</a> to ensure it has all it needs.</p>
</li>
<li>
<p>Configuring AD permissions (step 3)</p>
</li>
<li>
<p>Configuring LAPS GPO (step 4)</p>
</li>
</ul>
</li>
<li>
<p>(Optional) Install the legacy <a href="https://www.microsoft.com/en-us/download/details.aspx?id=46899" target="_blank" rel="noopener noreferrer">Microsoft LAPS Client Side Extension (CSE)</a> on Windows Server 2016 or older</p>
</li>
<li>
<p><em>Do not</em> install the legacy Microsoft LAPS Client Side Extension (CSE) on Windows Server 2019 or newer</p>
</li>
<li>
<p>(Optional) Use the legacy <code>Get-AdmPwdPassword -ComputerName &lt;SERVERNAME&gt;</code> PowerShell cmdlet to retrieve the password when running on Windows Server 2016 or older</p>
</li>
<li>
<p>Use the <code>Get-LapsADPassword -Identity &lt;SERVERNAME&gt; -AsPlainText</code> PowerShell cmdlet to retrieve the password when running on Windows Server 2019 or newer</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>Windows LAPS in legacy Microsoft LAPS emulation mode is a supported way to use the solution, considering AWS Managed AD limitations. The benefit is that customers would not have to install the CSE on Windows Server 2019 or newer. From a supportability standpoint, it is currently advisable to utilize the legacy Microsoft LAPS emulation mode when working with AWS Managed Active Directory. This approach provides the balance of functionality and support.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/aws-samples/technical-notes-for-microsoft-workloads-on-aws/blob/main/docusaurus/docs/Desktop Engineering/Guides/Windows_LAPS_&amp;_AWS_Microsoft_Managed_Active_Directory/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/Install_the_latest_AWS_Tools_for_PowerShell_CloudShell/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CloudShell - Install the latest AWS.Tools for PowerShell</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/technical-notes-for-microsoft-workloads-on-aws/DotNET/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">.NET</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#legacy-microsoft-laps-background" class="table-of-contents__link toc-highlight">Legacy Microsoft LAPS background</a></li><li><a href="#windows-laps-requirements-vs-aws-managed-ad-design" class="table-of-contents__link toc-highlight">Windows LAPS requirements vs AWS Managed AD design</a></li><li><a href="#windows-laps-in-legacy-microsoft-laps-emulation-mode" class="table-of-contents__link toc-highlight">Windows LAPS in legacy Microsoft LAPS emulation mode</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS. <br> © 2025.  Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>