<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-EC2 Windows/Guides/Accelerate_EBS_volume_initialization/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">EBS Provisioned Rate - Accelerate EBS volume initialization | Technical Notes for Microsoft Workloads on AWS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="EBS Provisioned Rate - Accelerate EBS volume initialization | Technical Notes for Microsoft Workloads on AWS"><meta data-rh="true" name="description" content="by Craig Cooley"><meta data-rh="true" property="og:description" content="by Craig Cooley"><link data-rh="true" rel="icon" href="/technical-notes-for-microsoft-workloads-on-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/"><link data-rh="true" rel="alternate" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/" hreflang="en"><link data-rh="true" rel="alternate" href="https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"EC2 Windows","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/"},{"@type":"ListItem","position":2,"name":"Guides","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/"},{"@type":"ListItem","position":3,"name":"EBS Provisioned Rate - Accelerate EBS volume initialization","item":"https://aws-samples.github.io/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/"}]}</script><link rel="alternate" type="application/rss+xml" href="/technical-notes-for-microsoft-workloads-on-aws/blog/rss.xml" title="Technical Notes for Microsoft Workloads on AWS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/technical-notes-for-microsoft-workloads-on-aws/blog/atom.xml" title="Technical Notes for Microsoft Workloads on AWS Atom Feed"><link rel="stylesheet" href="/technical-notes-for-microsoft-workloads-on-aws/assets/css/styles.36eb10ca.css">
<script src="/technical-notes-for-microsoft-workloads-on-aws/assets/js/runtime~main.7da5ba4c.js" defer="defer"></script>
<script src="/technical-notes-for-microsoft-workloads-on-aws/assets/js/main.c263cfc9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/technical-notes-for-microsoft-workloads-on-aws/"><div class="navbar__logo"><img src="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/technical-notes-for-microsoft-workloads-on-aws/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Technical Notes for Microsoft Workloads on AWS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/home">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/DotNET/Guides/">.NET</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Active Directory/Guides/">Active Directory</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Windows Containers/Guides/">Windows Containers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/SQL Server/Guides/">SQL Server</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/">EC2 Windows</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Licensing/Guides/">Licensing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/Guides/">Desktop Engineering</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/aws-samples/technical-notes-for-microsoft-workloads-on-aws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/technical-notes-for-microsoft-workloads-on-aws/home"><span title="About Technical Notes for Microsoft Workloads on AWS" class="linkLabel_WmDU">About Technical Notes for Microsoft Workloads on AWS</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Desktop Engineering/"><span title="Desktop Engineering" class="categoryLinkLabel_W154">Desktop Engineering</span></a><button aria-label="Expand sidebar category &#x27;Desktop Engineering&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/DotNET/"><span title=".NET" class="categoryLinkLabel_W154">.NET</span></a><button aria-label="Expand sidebar category &#x27;.NET&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Active Directory/"><span title="Active Directory" class="categoryLinkLabel_W154">Active Directory</span></a><button aria-label="Expand sidebar category &#x27;Active Directory&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Windows Containers/"><span title="Windows Containers" class="categoryLinkLabel_W154">Windows Containers</span></a><button aria-label="Expand sidebar category &#x27;Windows Containers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/SQL Server/"><span title="SQL Server" class="categoryLinkLabel_W154">SQL Server</span></a><button aria-label="Expand sidebar category &#x27;SQL Server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/"><span title="EC2 Windows" class="categoryLinkLabel_W154">EC2 Windows</span></a><button aria-label="Collapse sidebar category &#x27;EC2 Windows&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Restrict_EC2_IAM_role_permission_to_specific_Windows_users_for_AWS_Systems_Manager/"><span title="Restrict IAM permission to specific Windows users for AWS Systems Manager" class="linkLabel_WmDU">Restrict IAM permission to specific Windows users for AWS Systems Manager</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Windows_Server_2003_Migration_to_Amazon_EC2/"><span title="Windows Server 2003 Migration to Amazon EC2" class="linkLabel_WmDU">Windows Server 2003 Migration to Amazon EC2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/"><span title="EBS Provisioned Rate - Accelerate EBS volume initialization" class="linkLabel_WmDU">EBS Provisioned Rate - Accelerate EBS volume initialization</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/technical-notes-for-microsoft-workloads-on-aws/Licensing/"><span title="Licensing" class="categoryLinkLabel_W154">Licensing</span></a><button aria-label="Expand sidebar category &#x27;Licensing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/technical-notes-for-microsoft-workloads-on-aws/Workshops"><span title="Workshops" class="linkLabel_WmDU">Workshops</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/"><span>EC2 Windows</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/"><span>Guides</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">EBS Provisioned Rate - Accelerate EBS volume initialization</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>EBS Provisioned Rate - Accelerate EBS volume initialization</h1></header>
<p>by Craig Cooley</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction" translate="no">​</a></h3>
<p>When launching a new EC2 Instance - whether restoring from a backup or creating from an Amazon Machine Image (AMI), the EC2 Instance is launched and accessible after a few minutes.  If an Admin connects via RDP immediately after launch, the instance can seem slow and unresponsive, or the application may not run with the expected performance.</p>
<p>When an EBS volume is created from a snapshot (or AMI) the storage blocks are downloaded from S3 to EBS. The EBS volume is available as soon as the initial blocks are downloaded, however it&#x27;s not fully performant until all blocks are downloaded from S3.</p>
<p>In May 2025, AWS Announced <a href="https://aws.amazon.com/about-aws/whats-new/2025/05/ebs-provisioned-rate-volume-initialization/" target="_blank" rel="noopener noreferrer" class="">EBS Provisioned Rate for Volume Initialization</a> which  minimizes the amount of time taken to fully restore volumes from S3 to Elastic Block Storage (EBS).  <a href="https://docs.aws.amazon.com/ebs/latest/userguide/initalize-volume.html#volume-initialization-rate" target="_blank" rel="noopener noreferrer" class="">EBS Provisioned Rate</a> can fully restore the volume at a rate of up to 300 MiB/second to speed this process.</p>
<p>The <a href="https://docs.aws.amazon.com/sdkfornet/v4/apidocs/items/EC2/TEbsBlockDevice.html" target="_blank" rel="noopener noreferrer" class="">VolumeInitializationRate parameter</a> is relatively low cost (up to $0.00360/GB in us-east-1) and is &#x27;pay per use&#x27;.</p>
<p>To demonstrate the increased deployment speed, I added an EC2 User Data Script to install several Windows features when the Instance is launched.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Install-WindowsFeature `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -Name Failover-Clustering, RSAT-ADDs, RSAT-DNS-Server `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -IncludeManagementTools `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -IncludeAllSubFeature</span><br></span></code></pre></div></div>
<p>When the instance is launched, the optional Windows features are installed from the root volume which is being created.  Normally, when these commands are issued, the blocks are restored from S3 to the EBS volume on demand.</p>
<p>To compare the time to deploy with and without <strong>VolumeInitializationRate = 300</strong>, I added <code>Measure-Command</code> to the script and wrote the time to a local file.</p>
<p>Here&#x27;s the command you can run from Cloudshell which creates a new Windows Instance using the <code>VolumeInitializationRate = 300</code> parameter to initialize the C: drive at a rate of 300 MiB/second. so the Windows Features will install quickly.  The User Data script measures the amount of time needed to install the <code>Failover-Clustering</code>, <code>RSAT-ADDs</code>, and <code>RSAT-DNS-Server</code> Windows features after the instance boots and records it to a local file.</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Import-Module AWS.Tools.EC2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New-EC2Instance `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-ImageId &quot;resolve:ssm:/aws/service/ami-windows-latest/TPM-Windows_Server-2025-English-Full-Base&quot; `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-InstanceType &quot;c7a.xlarge&quot; `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-Region &quot;us-east-2&quot; `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-KeyName &quot;&lt;keyname&gt;&quot; `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-BlockDeviceMapping ( </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Amazon.EC2.Model.BlockDeviceMapping]@{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DeviceName = &#x27;/dev/sda1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EBS = [Amazon.EC2.Model.EbsBlockDevice]@{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            VolumeInitializationRate = 300</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-EncodeUserData `</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-UserData @&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;powershell&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Measure-Command {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Install-WindowsFeature ``</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -Name Failover-Clustering, RSAT-ADDs, RSAT-DNS-Server ``</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -IncludeManagementTools ``</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -IncludeAllSubFeature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Format-List TotalMinutes | </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Out-File &quot;C:\ProgramData\Amazon\EC2Launch\log\UserDataOutput.txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/powershell&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;@</span><br></span></code></pre></div></div>
<p>To test without the <strong>VolumeInitializationRate = 300</strong> parameter, remove the <code>-BlockDeviceMapping</code> parameter and compare the time to complete the feature installation by checking the <code>C:\ProgramData\Amazon\EC2Launch\log\UserDataOutput.txt</code> file saved to the local C: drive.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples:<a href="#examples" class="hash-link" aria-label="Direct link to Examples:" title="Direct link to Examples:" translate="no">​</a></h3>
<p><strong>With</strong> <code>VolumeInitializationRate = 300</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Instance ID: i-abcdef0123456789a   TotalMinutes : 3.24202892666667</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Instance ID: i-abcdef0123456789b   TotalMinutes : 3.280395915</span><br></span></code></pre></div></div>
<p><strong>Without</strong> <code>VolumeInitializationRate = 300</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Instance ID: i-abcdef0123456789c   TotalMinutes : 4.83370798333333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Instance ID: i-abcdef0123456789d   TotalMinutes : 4.71676925333333</span><br></span></code></pre></div></div>
<p>The <code>VolumeInitializationRate = 300</code> parameter reduced the time needed to install the Windows Features by about 1 min or 33%.</p>
<p>The EBS Snapshot for Windows 2025 is about 25GB, so given the price of $0.00360/GB. the added cost is a one time charge of $0.09.</p>
<p>EBS Provisioned Rate for Volume Initialization can be specified from the following:</p>
<ul>
<li class="">AWS EC2 Console</li>
<li class=""><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-launch-templates.html" target="_blank" rel="noopener noreferrer" class="">EC2 Launch Template</a></li>
<li class="">AWS Command line tools (AWS CLI or <a href="https://docs.aws.amazon.com/powershell/v5/reference/?page=New-EC2Instance.html&amp;tocid=New-EC2Instance" target="_blank" rel="noopener noreferrer" class="">AWS.Tools for PowerShell</a>)</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/aws-samples/technical-notes-for-microsoft-workloads-on-aws/blob/main/docusaurus/docs/EC2 Windows/Guides/Accelerate_EBS_volume_initialization/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/technical-notes-for-microsoft-workloads-on-aws/EC2 Windows/Guides/Windows_Server_2003_Migration_to_Amazon_EC2/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Windows Server 2003 Migration to Amazon EC2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/technical-notes-for-microsoft-workloads-on-aws/Licensing/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Licensing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples:</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS. <br> © 2025.  Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>